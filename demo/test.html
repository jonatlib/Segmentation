<html>
  <head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
  <script src="../src/jquery.segmentation.js" type="text/javascript"></script>
  
  <script>
    $(document).ready(function(){
    //20 - number of segments
    //150 time out between calls
    $('.test').segment({
      x: 1,
      y: 20,
      reverse: true
    }, 50, function(el, index, length, remove){
        var duration = { duration: 300, queue: false };
        $(el).animate({
            left: '+=150'
        }, duration);
        $(el).fadeOut(duration);
        setTimeout(function(){ if(index >= length - 1) remove(); }, duration.duration);
      });
    });
  </script>
  
  <style>
    .wrap { margin: 10px; width: 478px; height: 253px; }
    .test, .original { padding: 20px; background: url('img.gif'); width: 438px; height: 213px; }
  </style>
  </head>
  
  <body>
    <div class="wrap">
      <div class="test">
        <h2>Tadaaa</h2>
        <p>Tohle je test</p>
        <p>Tohle je test</p>
        <ul> <li>aaa</li> </ul>
      </div>
    </div>
    
    <div class="wrap">
      <div class="original">
        <h2>Tadaaa</h2>
        <p>Tohle je test</p>
        <p>Tohle je test</p>
        <ul> <li>aaa</li> </ul>
      </div>
    </div>
    
  </body>
</html>